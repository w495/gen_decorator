%% ΑΙΥΒΓΚΞΧΔΕΖΗΘΙΚΛΜΝΞΟΠΡΣΤΥΦΧΨΩαιυβγκξχδεζηθικλμνξοπρστυφχψω
[
    %% 
    %% Настрока самомго веб-сервера
    %% 
    {cowboy, [
        %% Server в заголовке запроса
        {server_name, "Empire web server v0.2"}
    ]},

    %% 
    %% Настрока нашего веб приложения
    %% 
    {empweb, [
        {cookiename,    "3m5123w38732v32"},
        {http, [
            {nbacceptors, 100},
            {port, 8001}
        ]},
        {https, [
            {nbacceptors, 100},
            {port, 8443},
            {certfile,  "priv/ssl/server.crt"},
            {keyfile,   "priv/ssl/server.key"},
            {password,  "empire"}
        ]},
        {host, "empire.av.sys"}
    ]},

    %%
    %% Настрока нашего веб приложения
    %%
    {empdb, [
        {pools, [
            {emp,
                [   %% Размер пула.
                    {size, 10},
                    %% Количество соединений, которые добавляются, если
                    %% размер пула исчерапан. После того, как соединения
                    %% не нужны, они убиваются.
                    {max_overflow, 100}
                ],
                [   {hostname, "127.0.0.1"},
                    {database, "emp"},
                    {username, "root"},
                    {password, "root"}
                ]
            },
            {ejabberd,
                [   %% Размер пула.
                    {size, 10},
                    %% Количество соединений, которые добавляются, если
                    %% размер пула исчерапан. После того, как соединения
                    %% не нужны, они убиваются.
                    {max_overflow, 100}
                ],
                [   {hostname, "127.0.0.1"},
                    {database, "ejabberd"},
                    {username, "root"},
                    {password, "root"}
                ]
            }
        ]}
    ]},

    %%
    %% Настрока журналирования (на файловую систему)
    %% Подробности настройки см ./deps/lager/README.org
    %%
    {lager, [
        {handlers, [
            %% Уровень журналирования консоли
            {lager_console_backend, error},
            %% Куда журналировать события разного уровня.
            %%      ~{node()} --- имя текущей ноды
            %%      ~{date()} --- дата запуска ноды
            %%      ~{time()} --- время запуска ноды
            %%
            %% Чтобы не накапливать большое число журналов,
            %% используется функция циклического журналирования.
            {lager_file_backend, [
                {   "priv/logs/~{node()}/~{date()}/~{time()}/debug.log",
                    debug,
                    1073741824, %% 1Gb. Максимальный размер, до зацикливания.
                    "$M1",      %% Первое число каждого месяца
                                %%  есть D{N}, W{N}, M{N} и их комбинации.
                    5           %% Сколько журналов еще помнить, кроме текущего.
                },
                {   "priv/logs/~{node()}/~{date()}/~{time()}/info.log",
                    info,
                    1073741824, %% 1Gb. Максимальный размер, до зацикливания.
                    "$M1",      %% Первое число каждого месяца
                                %%  есть D{N}, W{N}, M{N} и их комбинации.
                    5           %% Сколько журналов еще помнить, кроме текущего.
                },
                {   "priv/logs/~{node()}/~{date()}/~{time()}/notice.log",
                    notice,
                    1073741824, %% 1Gb. Максимальный размер, до зацикливания.
                    "$M1",      %% Первое число каждого месяца
                                %%  есть D{N}, W{N}, M{N} и их комбинации.
                    5           %% Сколько журналов еще помнить, кроме текущего.
                },
                {   "priv/logs/~{node()}/~{date()}/~{time()}/warning.log",
                    warning,
                    1073741824, %% 1Gb. Максимальный размер, до зацикливания.
                    "$M1",      %% Первое число каждого месяца
                                %%  есть D{N}, W{N}, M{N} и их комбинации.
                    5           %% Сколько журналов еще помнить, кроме текущего.
                },
                {   "priv/logs/~{node()}/~{date()}/~{time()}/error.log",
                    error,
                    1073741824,
                    "$M1",      %% Первое число каждого месяца
                                %%  есть D{N}, W{N}, M{N} и их комбинации.
                    5           %% Сколько журналов еще помнить, кроме текущего.
                },
                {   "priv/logs/~{node()}/~{date()}/~{time()}/critical.log",
                    critical,
                    1073741824, %% 1Gb. Максимальный размер, до зацикливания.
                    "$M1",      %% Первое число каждого месяца
                                %%  есть D{N}, W{N}, M{N} и их комбинации.
                    5           %% Сколько журналов еще помнить, кроме текущего.
                },
                {   "priv/logs/~{node()}/~{date()}/~{time()}/alert.log",
                    alert,
                    1073741824, %% 1Gb. Максимальный размер, до зацикливания.
                    "$M1",      %% Первое число каждого месяца
                                %%  есть D{N}, W{N}, M{N} и их комбинации.
                    5           %% Сколько журналов еще помнить, кроме текущего.
                },
                {   "priv/logs/~{node()}/~{date()}/~{time()}/emergency.log",
                    emergency,
                    1073741824, %% 1Gb. Максимальный размер, до зацикливания.
                    "$M1",      %% Первое число каждого месяца
                                %%  есть D{N}, W{N}, M{N} и их комбинации.
                    5           %% Сколько журналов еще помнить, кроме текущего.
                }
            ]}
        ]},
        %% Писать ли журнал падений и куда его писать.
        {crash_log, "priv/logs/~{node()}/~{date()}/~{time()}/crash.log"},
        %% Максимальный размер в байтах событий в журнале падений
        %% по умолчанию 65536
        {crash_log_msg_size, 1048576},
        %% 1Gb. Максимальный размер, до зацикливания.
        {crash_log_size, 1073741824},
        %% Как часто зацикливать журнал падений
        %% Тут первое число каждого месяца.
        {crash_log_date, "$M1"},
        %% Сколько журналов падений еще помнить, кроме текущего.
        {crash_log_count, 5},
        %% Перенаправить error_logger сообщения в лагер
        {error_logger_redirect, true}
    ]},

    {kernel, [
        {start_pg2, true}
        %,
        %{inet_dist_listen_min, 4370},
        %{inet_dist_listen_max, 4370}
    ]}
].
